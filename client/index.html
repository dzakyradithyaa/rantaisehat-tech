<!-- client/index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RantaiSehat - Sistem Manajemen Stok Farmasi</title>
    <!-- Google Fonts: Inter untuk font yang bersih dan profesional -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Menggunakan Bootstrap CDN untuk styling dasar -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <!-- Font Awesome untuk ikon -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/img/logo-trans.png" />
    <link rel="stylesheet" href="/client/style.css" />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img
            src="/img/logo.png"
            alt="RantaiSehat Logo"
            class="d-inline-block align-text-top"
          />
          RantaiSehat
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#about">Tentang Kami</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#features">Fitur</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#how-to-use">Cara Penggunaan</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Kontak</a>
            </li>
            <li class="nav-item">
              <button
                class="btn btn-primary ms-lg-3 mt-2 mt-lg-0"
                id="openTransactionModalBtn"
              >
                <i class="fas fa-plus-circle me-2"></i>Catat Stok
              </button>
            </li>
            <li class="nav-item">
              <button
                class="btn btn-outline-secondary ms-lg-3 mt-2 mt-lg-0"
                id="logoutBtn"
              >
                <i class="fas fa-sign-out-alt me-2"></i>Keluar
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- ====================== ISI (start) ==================== -->
    <div class="container my-5">
      <!-- Hero Section -->
      <section class="hero-section">
        <canvas id="heroCanvas"></canvas>
        <h2>Revolusi Manajemen Stok Farmasi Anda</h2>
        <p>
          RantaiSehat menggabungkan kekuatan teknologi blockchain dengan
          kecerdasan buatan untuk memberikan visibilitas stok yang tak
          tertandingi dan deteksi anomali real-time.
        </p>
        <a href="#how-to-use" class="btn btn-light btn-lg"
          >Mulai Sekarang <i class="fas fa-arrow-right ms-2"></i
        ></a>
      </section>

      <!-- Fitur Section -->
      <section id="features" style="padding-top: 125px">
        <h3 class="text-center mb-5">
          Layanan
          <span class="fw-bold" style="color: var(--accent-color)"
            >RantaiSehat</span
          >
        </h3>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
          <div class="col" -delay="100">
            <div class="feature-card">
              <div class="feature-content-top">
                <div class="icon-wrapper">
                  <i class="fas fa-cubes"></i>
                </div>
                <h4>Manajemen Stok Real-time</h4>
              </div>
              <div class="feature-description">
                <p>
                  Lacak setiap pergerakan stok obat Anda secara instan dengan
                  akurasi tinggi, memastikan data selalu mutakhir.
                </p>
              </div>
            </div>
          </div>
          <div class="col" -delay="200">
            <div class="feature-card">
              <div class="feature-content-top">
                <div class="icon-wrapper">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <h4>Keamanan Blockchain</h4>
              </div>
              <div class="feature-description">
                <p>
                  Setiap transaksi dicatat di blockchain, menyediakan audit
                  trail yang tidak dapat diubah dan meningkatkan integritas
                  data.
                </p>
              </div>
            </div>
          </div>
          <div class="col" -delay="300">
            <div class="feature-card">
              <div class="feature-content-top">
                <div class="icon-wrapper">
                  <i class="fas fa-robot"></i>
                </div>
                <h4>Deteksi Anomali AI</h4>
              </div>
              <div class="feature-description">
                <p>
                  Sistem AI kami secara proaktif mengidentifikasi pola stok yang
                  tidak biasa dan memberikan peringatan dini.
                </p>
              </div>
            </div>
          </div>
          <div class="col" -delay="100">
            <div class="feature-card">
              <div class="feature-content-top">
                <div class="icon-wrapper">
                  <i class="fas fa-chart-pie"></i>
                </div>
                <h4>Visualisasi Data Interaktif</h4>
              </div>
              <div class="feature-description">
                <p>
                  Lihat tren stok dan riwayat transaksi dengan grafik yang mudah
                  dipahami untuk analisis yang lebih baik.
                </p>
              </div>
            </div>
          </div>
          <div class="col" -delay="200">
            <div class="feature-card">
              <div class="feature-content-top">
                <div class="icon-wrapper">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <h4>Antarmuka Responsif</h4>
              </div>
              <div class="feature-description">
                <p>
                  Akses dan kelola stok Anda dari perangkat apa pun, kapan saja,
                  dengan tampilan yang dioptimalkan untuk seluler.
                </p>
              </div>
            </div>
          </div>
          <div class="col" -delay="300">
            <div class="feature-card">
              <div class="feature-content-top">
                <div class="icon-wrapper">
                  <i class="fas fa-users-cog"></i>
                </div>
                <h4>Manajemen Pengguna</h4>
              </div>
              <div class="feature-description">
                <p>
                  Kelola akses pengguna dengan peran yang berbeda untuk
                  memastikan keamanan dan efisiensi operasional.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- How to Use Section -->
      <section id="how-to-use">
        <h3 class="text-center" style="margin-top: 100px">
          Bagaimana Menggunakan
          <span class="fw-bold" style="color: var(--accent-color)"
            >RantaiSehat?</span
          >
        </h3>
        <p class="text-center text-secondary">
          Ikuti langkah-langkah mudah ini untuk mulai mengelola stok farmasi
          Anda.
        </p>
        <div class="timeline">
          <div class="timeline__component">
            <div class="timeline__date timeline__date--right">Step 01</div>
          </div>
          <div class="timeline__middle">
            <div class="timeline__point"></div>
          </div>
          <div class="timeline__component timeline__component--bg">
            <animated-icons
              src="https://animatedicons.co/get-icon?name=wifi&style=minimalistic&token=28d5a189-44aa-47b4-a733-6b160447b2ac"
              trigger="loop-on-hover"
              attributes='{"variationThumbColour":"#536DFE","variationName":"Two Tone","variationNumber":2,"numberOfGroups":2,"backgroundIsGroup":false,"strokeWidth":2,"defaultColours":{"group-1":"#000000","group-2":"#3DB97FFF","background":"#FFFFFF"}}'
              height="70"
              width="70"
            ></animated-icons>
            <h2 class="timeline__title">Hubungkan MetaMask</h2>
            <p class="timeline__paragraph">
              Pastikan MetaMask terinstal dan hubungkan akun Anda.
            </p>
          </div>
          <div class="timeline__component timeline__component--bg">
            <animated-icons
              src="https://animatedicons.co/get-icon?name=note&style=minimalistic&token=cb234c69-9f56-4cf2-844e-2c2109b81513"
              trigger="loop-on-hover"
              attributes='{"variationThumbColour":"#536DFE","variationName":"Two Tone","variationNumber":2,"numberOfGroups":2,"backgroundIsGroup":false,"strokeWidth":2,"defaultColours":{"group-1":"#000000","group-2":"#3DB97FFF","background":"#FFFFFF"}}'
              height="70"
              width="70"
            ></animated-icons>
            <h2 class="timeline__title">Catat Transaksi</h2>
            <p class="timeline__paragraph">
              Masukkan detail obat dan jenis transaksi (Masuk/Keluar/Rusak).
            </p>
          </div>
          <div class="timeline__middle">
            <div class="timeline__point"></div>
          </div>
          <div class="timeline__component">
            <div class="timeline__date">Step 02</div>
          </div>
          <div class="timeline__component">
            <div class="timeline__date timeline__date--right">Step 03</div>
          </div>
          <div class="timeline__middle">
            <div class="timeline__point"></div>
          </div>
          <div class="timeline__component timeline__component--bg">
            <animated-icons
              src="https://animatedicons.co/get-icon?name=search&style=minimalistic&token=12e9ffab-e7da-417f-a9d9-d7f67b64d808"
              trigger="loop-on-hover"
              attributes='{"variationThumbColour":"#536DFE","variationName":"Two Tone","variationNumber":2,"numberOfGroups":2,"backgroundIsGroup":false,"strokeWidth":2,"defaultColours":{"group-1":"#000000","group-2":"#3DB97FFF","background":"#FFFFFF"}}'
              height="70"
              width="70"
            ></animated-icons>
            <h2 class="timeline__title">Pantau Stok</h2>
            <p class="timeline__paragraph">
              Lihat inventaris dan riwayat transaksi di dashboard.
            </p>
          </div>
          <div
            class="timeline__component timeline__component--bottom timeline__component--bg"
          >
            <animated-icons
              src="https://animatedicons.co/get-icon?name=Chatbot&style=minimalistic&token=6b3aba1e-cf81-46d6-8923-cca76667c70d"
              trigger="loop-on-hover"
              attributes='{"variationThumbColour":"#536DFE","variationName":"Two Tone","variationNumber":2,"numberOfGroups":2,"backgroundIsGroup":false,"strokeWidth":1.4,"defaultColours":{"group-1":"#000000","group-2":"#3DB97FFF","background":"#FFFFFF"}}'
              height="70"
              width="70"
            ></animated-icons>
            <h2 class="timeline__title">Pahami Anomali</h2>
            <p class="timeline__paragraph">
              Sistem AI akan memberikan peringatan untuk pola stok tidak biasa.
            </p>
          </div>
          <div class="timeline__middle">
            <div class="timeline__point"></div>
            <div class="timeline__point"></div>
          </div>
          <div class="timeline__component timeline__component--bottom">
            <div class="timeline__date">Step 04</div>
          </div>
        </div>
      </section>

      <!-- Dashboard Section -->
      <section id="dashboard-section" style="margin-top: 100px">
        <!-- Judul Dashboard -->
        <section id="dashboard-judul">
          <div class="text-center mb-3">
            <div style="display: inline-flex; align-items: center; gap: 10px">
              <animated-icons
                src="https://animatedicons.co/get-icon?name=dashboard&style=minimalistic&token=fc5c52bc-b9f4-4fb9-981d-70e44b853063"
                trigger="loop"
                attributes='{"variationThumbColour":"#536DFE","variationName":"Two Tone","variationNumber":2,"numberOfGroups":2,"backgroundIsGroup":false,"strokeWidth":1,"defaultColours":{"group-1":"#000000","group-2":"#3DB97FFF","background":"#FFFFFF"}}'
                height="50"
                width="50"
              ></animated-icons>
              <h3 style="margin: 0">Dashboard Aplikasi</h3>
            </div>
          </div>
        </section>

        <!-- Area Notifikasi Status Koneksi MetaMask -->
        <div id="connectionStatusContainer" class="connection-status-card mb-4">
          <!-- Konten akan diisi oleh JavaScript -->
          <i class="fas fa-spinner fa-spin status-icon"></i>
          <span class="status-text">Memuat status koneksi MetaMask...</span>
        </div>

        <!-- Area Notifikasi Anomali -->
        <div class="card shadow-lg mb-4" -delay="100">
          <div
            class="card-header"
            style="background-color: #343a40; color: #ffffff"
          >
            <i class="fas fa-exclamation-triangle me-2"></i>Peringatan Anomali
            (AI)
          </div>
          <div class="card-body">
            <ul id="anomalyAlerts" class="list-group list-group-flush">
              <li class="list-group-item text-muted">
                Tidak ada anomali terdeteksi sejauh ini.
              </li>
            </ul>
          </div>
        </div>

        <!-- Tombol Hapus Notifikasi Anomali -->
        <div class="text-center mb-4" -delay="200">
          <button id="resetStockBtn" class="btn btn-outline-secondary btn-sm">
            <i class="fas fa-redo-alt me-2"></i>Bersihkan Notifikasi Anomali
          </button>
          <p class="text-muted mt-2">
            Notifikasi anomali yang belum teratasi (misalnya, stok masih
            negatif) akan tetap ditampilkan di sini.
          </p>
        </div>

        <!-- Bagian Stok Simulasi -->
        <div class="row">
          <div class="col-md-12">
            <div class="card shadow-lg mb-4" -delay="300">
              <div
                class="card-header"
                style="background-color: #3db97f; color: #ffffff"
              >
                <i class="fas fa-box me-2"></i>Stok Saat Ini
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th>Nama Obat</th>
                        <th>Kuantitas</th>
                        <th>Terakhir Diperbarui</th>
                        <th>Aksi</th>
                      </tr>
                    </thead>
                    <tbody id="simulatedStockTableBody">
                      <!-- Stok akan dimuat di sini oleh JavaScript -->
                      <tr>
                        <td colspan="4" class="text-muted text-center py-3">
                          Memuat stok...
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bagian Grafik -->
        <div class="row">
          <div class="col-md-12">
            <div class="card shadow-lg mb-4" -delay="400">
              <div class="card-header bg-primary text-white">
                <i class="fas fa-chart-line me-2"></i>Grafik Tren Stok Obat
              </div>
              <div class="card-body">
                <div class="mb-3">
                  <label for="chartItemSelect" class="form-label"
                    >Pilih Obat untuk Grafik:</label
                  >
                  <select class="form-select" id="chartItemSelect">
                    <option value="all">Semua Obat (Tren)</option>
                    <!-- Opsi obat akan dimuat di sini oleh JavaScript -->
                  </select>
                </div>
                <div id="stockChartContainer">
                  <canvas id="stockChartCanvas"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bagian Riwayat Transaksi -->
        <div class="row">
          <div class="col-md-12">
            <div class="card shadow-lg mb-4" -delay="500">
              <div class="card-header bg-primary text-white">
                <i class="fas fa-history me-2"></i>Log Pergerakan Obat
              </div>
              <div class="card-body">
                <!-- Form Pencarian Riwayat Transaksi -->
                <div class="mb-4 p-3 border rounded-3">
                  <h5 class="mb-3">
                    <i class="fas fa-search me-2"></i>Cari Transaksi
                  </h5>
                  <div class="row g-3">
                    <div class="col-md-4">
                      <label for="searchItemName" class="form-label"
                        >Nama Obat:</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="searchItemName"
                        placeholder="Cari nama obat..."
                      />
                    </div>
                    <div class="col-md-4">
                      <label for="searchStartDate" class="form-label"
                        >Tanggal Mulai:</label
                      >
                      <input
                        type="date"
                        class="form-control"
                        id="searchStartDate"
                      />
                    </div>
                    <div class="col-md-4">
                      <label for="searchEndDate" class="form-label"
                        >Tanggal Akhir:</label
                      >
                      <input
                        type="date"
                        class="form-control"
                        id="searchEndDate"
                      />
                    </div>
                  </div>
                  <div class="mt-3">
                    <button
                      type="button"
                      class="btn btn-info me-2"
                      id="searchTransactionsBtn"
                    >
                      <i class="fas fa-filter me-2"></i>Cari
                    </button>
                    <button
                      type="button"
                      class="btn btn-outline-secondary"
                      id="resetSearchBtn"
                    >
                      <i class="fas fa-undo me-2"></i>Reset Pencarian
                    </button>
                  </div>
                </div>

                <!-- Container baru untuk scrollable list -->
                <div id="transactionsListContainer" class="shadow-sm">
                  <ul id="transactionsList" class="list-group list-group-flush">
                    <!-- Transaksi akan dimuat di sini oleh JavaScript -->
                    <li class="list-group-item text-muted text-center py-3">
                      Memuat riwayat transaksi...
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- About Us Section -->
      <section
        id="about"
        class="about-section info-section"
        style="margin-top: 100px"
      >
        <div class="container">
          <div class="row align-items-center gx-5">
            <!-- Kiri: Teks -->
            <div class="col-lg-6 mb-lg-0">
              <h3 class="section-title">
                <i class="fas fa-info-circle me-2"></i>Tentang RantaiSehat
              </h3>
              <p>
                RantaiSehat adalah solusi inovatif yang dirancang untuk
                merevolusi manajemen stok di industri farmasi. Dengan
                memanfaatkan teknologi blockchain yang aman dan transparan, kami
                memastikan setiap transaksi tercatat dengan integritas tinggi.
              </p>
              <p>
                Didukung oleh kecerdasan buatan, sistem kami tidak hanya melacak
                inventaris secara real-time, tetapi juga secara proaktif
                mendeteksi anomali seperti stok negatif, pengeluaran tidak
                biasa, atau penerimaan berlebih. Hal ini membantu apoteker dan
                manajer rantai pasok mengambil keputusan yang lebih tepat dan
                mencegah kerugian.
              </p>
              <h3 class="section-title mt-4">
                <i class="fas fa-bullseye me-2"></i>Misi Kami
              </h3>
              <p>
                Misi kami adalah memberdayakan fasilitas farmasi dengan alat
                yang canggih namun mudah digunakan, untuk mengelola stok obat
                secara efisien, meminimalkan kesalahan manusia, dan menjaga
                ketersediaan obat demi keamanan pasien.
              </p>
            </div>

            <!-- Kanan: Logo -->
            <div class="col-lg-6 text-center">
              <img
                src="/img/logo-trans.png"
                alt="Logo RantaiSehat"
                class="about-logo"
              />
            </div>
          </div>
        </div>
      </section>

      <!-- Contact Us Section -->
      <section id="contact" class="info-section">
        <h3 class="text-center mb-4">
          <i class="fas fa-headset me-2"></i>Kontak Kami
        </h3>
        <p class="text-center">
          Jika Anda memiliki pertanyaan atau ingin mempelajari lebih lanjut
          tentang RantaiSehat, jangan ragu untuk menghubungi kami:
        </p>
        <ul class="list-unstyled text-center">
          <li><i class="fas fa-envelope"></i> rantaisehat.tech@gmail.com</li>
          <li><i class="fas fa-map-marker-alt"></i> Bandung, Indonesia</li>
        </ul>
      </section>
    </div>

    <!-- ====================== ISI (end) ==================== -->

    <!-- Footer -->
    <footer class="footer">
      <p>&copy; 2025 RantaiSehat. Semua Hak Dilindungi.</p>
    </footer>

    <!-- Custom Modal Structure (Untuk Alert Umum) -->
    <div id="customAlertModal" class="custom-modal-overlay">
      <div class="custom-modal-content">
        <div class="custom-modal-header">
          <h5 id="customAlertTitle">Peringatan</h5>
          <button
            type="button"
            class="custom-modal-close-btn"
            id="customAlertCloseBtn"
          >
            &times;
          </button>
        </div>
        <div class="custom-modal-body" id="customAlertMessage">
          <!-- Message will be inserted here -->
        </div>
        <div class="custom-modal-footer">
          <button type="button" class="btn btn-primary" id="customAlertOkBtn">
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Modal Baru untuk Formulir Transaksi -->
    <div
      class="modal fade"
      id="transactionFormModal"
      tabindex="-1"
      aria-labelledby="transactionFormModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="transactionFormModalLabel">
              Catat Transaksi Stok Baru
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="transactionForm">
              <div class="mb-3">
                <label for="itemName" class="form-label">Nama Obat:</label>
                <input
                  type="text"
                  class="form-control"
                  id="itemName"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="quantity" class="form-label">Kuantitas:</label>
                <input
                  type="number"
                  class="form-control"
                  id="quantity"
                  min="1"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="transactionType" class="form-label"
                  >Tipe Transaksi:</label
                >
                <select class="form-select" id="transactionType" required>
                  <option value="Masuk">Masuk</option>
                  <option value="Keluar">Keluar</option>
                  <option value="Rusak">Rusak</option>
                </select>
              </div>
              <button type="submit" class="btn btn-primary mt-3">
                Catat Transaksi
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Ubah Nama -->
    <div
      class="modal fade"
      id="renameModal"
      tabindex="-1"
      aria-labelledby="renameModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="renameModalLabel">Ubah Nama Obat</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <form id="renameForm">
            <div class="modal-body">
              <div class="mb-3">
                <label for="renameItemName" class="form-label"
                  >Nama Asli (dari Blockchain):</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="renameItemName"
                  readonly
                />
              </div>
              <div class="mb-3">
                <label for="renameDisplayName" class="form-label"
                  >Nama Tampilan Baru:</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="renameDisplayName"
                  required
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Batal
              </button>
              <button type="submit" class="btn btn-primary">
                Simpan Perubahan
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Animated Icon -->
    <script src="https://animatedicons.co/scripts/embed-animated-icons.js"></script>

    <!-- Script Luxon (Date Library) -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@2.5.0/build/global/luxon.min.js"></script>
    <!-- Script Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <!-- Script Chart.js adapter for Luxon -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.2.0/dist/chartjs-adapter-luxon.min.js"></script>
    <!-- Script Web3.js -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
    <!-- Script Bootstrap Bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- AOS (Animate On Scroll) JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- Firebase SDK Imports -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
      import {
        getAuth,
        signInAnonymously,
        signInWithCustomToken,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
        setDoc,
        collection,
        onSnapshot,
        deleteDoc,
        FieldValue,
        serverTimestamp,
        query, // Import query
        where, // Import where
        getDocs, // Import getDocs
      } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

      // Your web app's Firebase configuration - INI ADALAH KONFIGURASI YANG ANDA BERIKAN
      const firebaseConfig = {
        apiKey: "AIzaSyAtSg18CK3hhCfhBHTIfDO-HMbfaITR03s",
        authDomain: "rantaisehat-tech.firebaseapp.com",
        projectId: "rantaisehat-tech",
        storageBucket: "rantaisehat-tech.firebasestorage.app",
        messagingSenderId: "944193953926",
        appId: "1:944193953926:web:bbb9f219628295df14f107",
        measurementId: "G-04PQCZF45D",
      };

      // Inisialisasi Firebase secara langsung di sini untuk memastikan ketersediaan
      const appInstance = initializeApp(firebaseConfig);

      // Variabel global Firebase (akan diinisialisasi di initApp di app.js)
      // Kita mengekspos konfigurasi dan app ID agar app.js bisa menggunakannya
      window.__firebase_config = JSON.stringify(firebaseConfig);
      window.__app_id = firebaseConfig.projectId; // Menggunakan projectId sebagai __app_id

      // Mengekspos fungsi-fungsi Firebase yang dibutuhkan oleh app.js
      window.initializeApp = initializeApp;
      window.getAuth = getAuth;
      window.signInAnonymously = signInAnonymously;
      window.signInWithCustomToken = signInWithCustomToken;
      window.onAuthStateChanged = onAuthStateChanged; // Expose onAuthStateChanged
      window.getFirestore = getFirestore;
      window.doc = doc;
      window.getDoc = getDoc;
      window.setDoc = setDoc;
      window.collection = collection;
      window.onSnapshot = onSnapshot;
      window.deleteDoc = deleteDoc; // Expose deleteDoc
      window.serverTimestamp = serverTimestamp;
      window.query = query; // Expose query
      window.where = where; // Expose where
      window.getDocs = getDocs; // Expose getDocs
    </script>
    <!-- Link ke file JavaScript aplikasi Anda -->
    <script src="app.js"></script>
    <script>
      // Inisialisasi AOS
      AOS.init({
        duration: 800, // Durasi animasi dalam ms
        once: true, // Animasi hanya terjadi sekali saat menggulir ke bawah
      });

      // Three.js Particle Background for Hero Section
      let scene, camera, renderer, particles;
      const particleCount = 1000; // Jumlah partikel
      const particleSpeed = 0.0005; // Kecepatan gerakan partikel

      function initParticles() {
        const heroSection = document.querySelector(".hero-section");
        const canvas = document.getElementById("heroCanvas");

        if (!heroSection || !canvas) {
          console.error(
            "Hero section or canvas not found for Three.js particles."
          );
          return;
        }

        // Scene
        scene = new THREE.Scene();

        // Camera
        camera = new THREE.PerspectiveCamera(
          75,
          heroSection.clientWidth / heroSection.clientHeight,
          0.1,
          1000
        );
        camera.position.z = 5;

        // Renderer
        renderer = new THREE.WebGLRenderer({
          canvas: canvas,
          alpha: true, // Latar belakang transparan
          antialias: true,
        });
        renderer.setSize(heroSection.clientWidth, heroSection.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        // Particles Geometry
        const geometry = new THREE.BufferGeometry();
        const positions = [];
        const colors = [];
        const color = new THREE.Color();

        for (let i = 0; i < particleCount; i++) {
          // Posisi acak dalam kubus
          positions.push(
            (Math.random() * 2 - 1) * 10, // x
            (Math.random() * 2 - 1) * 10, // y
            (Math.random() * 2 - 1) * 10 // z
          );

          // Warna acak antara putih dan hijau terang
          color.setHSL(
            0.3 + Math.random() * 0.1,
            0.5,
            0.7 + Math.random() * 0.3
          ); // Hijau muda ke putih
          colors.push(color.r, color.g, color.b);
        }

        geometry.setAttribute(
          "position",
          new THREE.Float32BufferAttribute(positions, 3)
        );
        geometry.setAttribute(
          "color",
          new THREE.Float32BufferAttribute(colors, 3)
        );

        // Particles Material
        const material = new THREE.PointsMaterial({
          size: 0.05, // Ukuran partikel
          vertexColors: true, // Gunakan warna per vertex
          transparent: true,
          opacity: 0.7,
          blending: THREE.AdditiveBlending, // Efek cahaya
        });

        // Create Particles
        particles = new THREE.Points(geometry, material);
        scene.add(particles);

        // Handle window resize
        window.addEventListener("resize", onWindowResize, false);
      }

      function onWindowResize() {
        const heroSection = document.querySelector(".hero-section");
        if (heroSection) {
          camera.aspect = heroSection.clientWidth / heroSection.clientHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(heroSection.clientWidth, heroSection.clientHeight);
        }
      }

      function animateParticles() {
        requestAnimationFrame(animateParticles);

        // Gerakkan partikel perlahan
        if (particles) {
          particles.rotation.x += particleSpeed * 0.5;
          particles.rotation.y += particleSpeed;
        }

        renderer.render(scene, camera);
      }

      // Inisialisasi dan mulai animasi setelah DOM dimuat
      window.onload = function () {
        initParticles();
        animateParticles();
      };
    </script>
  </body>
</html>
